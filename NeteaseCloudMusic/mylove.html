<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>
    <table width="100%">
        <thead>
        <tr>
            <th>ID</th>
            <th>名称</th>
            <th>歌手</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>

    <script src="./libs/jquery-3.2.1.js"></script>
    <script>

        let songList = localStorage.getItem('songList');
        if (!songList) {
            songList = [];
        } else {
            songList = JSON.parse(songList);
        }

        let html = '';

        songList.forEach(song => {
            html += `
<tr>
    <td>${song}</td>
    <td>2</td>
    <td>3</td>
    <td>播放</td>
</tr>
                        `
        });

        $('tbody').html(html);

        window.onstorage = function(e) {
            console.log(e);

            let newArr = [];

            if (!e.oldValue) {
                newArr = JSON.parse(e.newValue);
            }
            if (e.oldValue && e.newValue) {
                let oldValue = JSON.parse(e.oldValue);
                let newValue = JSON.parse(e.newValue);

                newArr = newValue.slice(oldValue.length);
            }

            console.log(newArr);

            newArr.forEach( data=> {
                $('tbody').append(`
<tr>
    <td>${data}</td>
    <td>2</td>
    <td>3</td>
    <td>播放</td>
</tr>
                        `);
            } )


        }

    </script>
</body>
</html>
